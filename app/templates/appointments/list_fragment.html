<div class="card shadow-sm border-0 animate-fade-in">
    <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center border-bottom">
        <h2 class="h5 fw-bold mb-0 text-dark">
            <i class="bi bi-calendar-check me-2 text-primary"></i>Agenda Clínica
        </h2>
        <button hx-get="/appointments/new" hx-target="#main-content" hx-push-url="true"
                class="btn btn-primary d-flex align-items-center gap-2 shadow-sm">
            <i class="bi bi-plus-circle"></i>
            <span>Novo Agendamento</span>
        </button>
    </div>

    <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
                <tr>
                    <th class="px-4 py-3 text-secondary small fw-bold text-uppercase">Data / Hora</th>
                    <th class="px-4 py-3 text-secondary small fw-bold text-uppercase">Paciente</th>
                    <th class="px-4 py-3 text-secondary small fw-bold text-uppercase">Médico</th>
                    <th class="px-4 py-3 text-secondary small fw-bold text-uppercase">Valor</th>
                    <th class="px-4 py-3 text-center text-secondary small fw-bold text-uppercase">Status</th>
                </tr>
            </thead>
            <tbody>
                {% for app in appointments %}
                <tr>
                    <td class="px-4 py-3">
                        <div class="d-flex align-items-center text-primary fw-bold">
                            <i class="bi bi-clock me-2 small"></i>
                            {{ app.date.replace('T', ' ') }}
                        </div>
                    </td>
                    <td class="px-4 py-3">
                        <div class="fw-medium text-dark">{{ app.patient.name }}</div>
                    </td>
                    <td class="px-4 py-3 text-muted">
                        <span class="small text-uppercase fw-semibold">Dr(a).</span> {{ app.doctor.name }}
                    </td>
                    <td class="px-4 py-3">
                        <span class="text-dark fw-medium">R$ {{ "%.2f"|format(app.cost) }}</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        {% set status_styles = {
                            'scheduled': 'bg-info-subtle text-info border-info-subtle',
                            'waiting': 'bg-warning-subtle text-warning-emphasis border-warning-subtle',
                            'in_progress': 'bg-primary-subtle text-primary border-primary-subtle',
                            'completed': 'bg-success-subtle text-success border-success-subtle',
                            'canceled': 'bg-danger-subtle text-danger border-danger-subtle'
                        } %}
                        {% set status_icons = {
                            'scheduled': 'bi-calendar-event',
                            'waiting': 'bi-person-walking',
                            'in_progress': 'bi-stethoscope',
                            'completed': 'bi-check-all',
                            'canceled': 'bi-x-circle'
                        } %}
                        <span class="badge border px-3 py-2 rounded-pill d-inline-flex align-items-center gap-1 {{ status_styles.get(app.status, 'bg-light text-dark') }}" style="font-size: 0.7rem;">
                            <i class="bi {{ status_icons.get(app.status, 'bi-question-circle') }}"></i>
                            {{ app.status|upper }}
                        </span>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5" class="text-center py-5 text-muted">
                        <i class="bi bi-calendar-x fs-2 d-block mb-2"></i>
                        Nenhum agendamento para o período selecionado.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>